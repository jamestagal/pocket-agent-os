# Agent Routing Configuration
# Defines how tasks are routed to specialist agents
#
# This file is generated during project installation.
# Customize routing by editing this file.

# ============================================================================
# SPECIALIST MAPPINGS
# Map domains to specialist agents. Tasks detected as belonging to a domain
# will be routed to the corresponding specialist.
# ============================================================================

specialists:
  # Frontend tasks (UI, components, pages, styling, client-side logic)
  frontend: frontend-specialist
  
  # API tasks (server routes, form actions, query helpers)
  api: api-specialist
  
  # Database tasks (schema, migrations, models, relations)
  database: database-specialist
  
  # Testing tasks - uses implementer (testing is embedded in each specialist)
  testing: implementer
  
  # Default fallback for any unmatched domain
  default: implementer


# ============================================================================
# DOMAIN DETECTION RULES
# Customize how tasks are classified into domains
# ============================================================================

domain_detection:
  frontend:
    # File path patterns that indicate frontend work
    path_patterns:
      - "src/routes/**/*.svelte"
      - "src/lib/components/**"
      - "src/lib/stores/**"
      - "**/*.css"
      - "**/*.scss"
    # Keywords in task descriptions
    keywords:
      - "component"
      - "page"
      - "UI"
      - "layout"
      - "style"
      - "responsive"
      - "animation"
      - "svelte"
      - "form"
      - "button"
      - "modal"
      - "card"
      
  api:
    path_patterns:
      - "src/routes/**/+page.server.ts"
      - "src/routes/**/+server.ts"
      - "src/lib/server/**"
      - "api/**"
      - "**/routes/api/**"
    keywords:
      - "endpoint"
      - "API"
      - "handler"
      - "middleware"
      - "authentication"
      - "authorization"
      - "action"
      - "load function"
      - "query helper"
      - "server"
      
  database:
    path_patterns:
      - "prisma/**"
      - "drizzle/**"
      - "**/models/**"
      - "**/migrations/**"
      - "**/db/**"
      - "**/schema.ts"
    keywords:
      - "database"
      - "model"
      - "migration"
      - "query"
      - "schema"
      - "table"
      - "relation"
      - "drizzle"
      - "prisma"
      - "foreign key"
      - "index"

  testing:
    path_patterns:
      - "**/*.test.*"
      - "**/*.spec.*"
      - "tests/**"
      - "__tests__/**"
    keywords:
      - "test"
      - "spec"
      - "coverage"
      - "mock"
      - "vitest"
      - "jest"


# ============================================================================
# SPEC OVERRIDES
# Override routing for specific specs (by spec name pattern)
# ============================================================================

spec_overrides:
  # Example: Route all tasks in security-related specs to security specialist
  # "*-security-*":
  #   all_tasks: security-specialist
  
  # Example: Complex auth spec uses api specialist for everything
  # "*-auth-*":
  #   all_tasks: api-specialist


# ============================================================================
# TASK GROUP OVERRIDES
# Override routing for specific task groups within any spec
# ============================================================================

task_group_overrides:
  # Task group names to agent mappings
  # These match the task group headers in tasks.md
  
  "Database Layer":
    agent: database-specialist
    
  "API Layer":
    agent: api-specialist
    
  "Frontend Components":
    agent: frontend-specialist
    
  "UI Components":
    agent: frontend-specialist
    
  "Testing":
    agent: implementer


# ============================================================================
# ROUTING BEHAVIOR
# Fine-tune how routing decisions are made
# ============================================================================

behavior:
  # When multiple domains are detected, use this strategy
  # Options: "first", "primary", "ask"
  multi_domain_strategy: "primary"
  
  # Minimum confidence threshold for domain detection (0.0 - 1.0)
  # Below this threshold, falls back to default agent
  confidence_threshold: 0.6
  
  # Log routing decisions for debugging
  log_decisions: true
  
  # Allow manual override in task description
  # e.g., "[use:api-specialist] Implement OAuth flow"
  allow_inline_override: true
